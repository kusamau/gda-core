<?xml version="1.0" encoding="UTF-8"?>

<!-- scan="true" allows this file to be modified live to change the logging configuration -->
<!-- debug="true" logs the logback configuration -->
<configuration scan="true" scanPeriod="10 seconds" debug="true">

	<!-- Standard shared logging configuration used by the GDA server and client. -->

	<!-- In general you should just use this default logging configuration. If you really need to customise your logging
		setup you should copy this file as a template. You will also need to override the gda.server.logging.xml
		property to point to your customised configuration file. -->

	<!-- Include the standard set of properties files -->
	<include file="${gda.core.dir}/properties/logging_properties_includes.xml" />

	<!-- Appender to send log messages to the log server -->
	<!-- http://logback.qos.ch/manual/appenders.html#SocketAppender -->
	<appender name="LogServer" class="ch.qos.logback.classic.net.SocketAppender">
		<remoteHost>${gda.logserver.host}</remoteHost>
		<port>${gda.server.logging.port}</port>
		<reconnectionDelay>10000</reconnectionDelay>
		<includeCallerData>true</includeCallerData>
		<queueSize>4096</queueSize>
	</appender>

	<!-- Send debug and higher level logging messages to the log server by default. In general filtering messages at the
		source is the best way as this prevents performance issues.
		NOTE: Before using the logging system to filter out messages from a noisy class, consider editing the class
		itself to improve how it logs its activity. -->
	<root>
		<level value="DEBUG" />
		<appender-ref ref="LogServer" />
	</root>

	<!-- Here we filter specific loggers for everyone -->

	<!-- Jetty is very noisy at DEBUG level, filter those messages out -->
	<logger name="org.eclipse.jetty" level="INFO" />
	<!-- Also filter noisy GDA packages (NOTE: These could be edited and improved)-->
	<logger name="gda.device.corba.impl" level="INFO" />
	<!-- At DEBUG level activemq logs a message every 10 secs to reassure you its still working -->
	<logger name="org.apache.activemq.transport.AbstractInactivityMonitor" level="INFO" />

	<!-- If this file exists it allows you to customise logging levels for each config -->
	<include file="${gda.config}/properties/_common/logging_customisation.xml" />

</configuration>
